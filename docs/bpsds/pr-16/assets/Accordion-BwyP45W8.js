import{j as u}from"./jsx-runtime-Cf8x2fCZ.js";import{a as v,$ as M}from"./Button-BusymwjI.js";import{d as $,y as W,b as I,v as h,r as m,w as y,s as V,u as w,B as D,C as T,$ as C,D as q}from"./Hidden-CJaOgpXL.js";import{r as i,R as p}from"./index-Dx_1l3Sb.js";import{$ as A}from"./useControlledState-BKOD5Axx.js";import{r as _}from"./index-DML4njjH.js";import{$ as k}from"./useEvent-BFPHVnvf.js";import{c as P}from"./cn-DjqsqOe8.js";import{C as B}from"./chevron-down-C9pjfVXO.js";function G(l,e,d){let{isDisabled:a}=l,s=$(),n=$(),r=W(),o=i.useRef(null),c=i.useCallback(()=>{o.current=requestAnimationFrame(()=>{d.current&&d.current.setAttribute("hidden","until-found")}),_.flushSync(()=>{e.toggle()})},[d,e]);k(d,"beforematch",c);let f=i.useRef(null);return I(()=>{if(o.current&&cancelAnimationFrame(o.current),d.current&&!r){let t=d.current;f.current==null||typeof t.getAnimations!="function"?e.isExpanded?(t.removeAttribute("hidden"),t.style.setProperty("--disclosure-panel-width","auto"),t.style.setProperty("--disclosure-panel-height","auto")):(t.setAttribute("hidden","until-found"),t.style.setProperty("--disclosure-panel-width","0px"),t.style.setProperty("--disclosure-panel-height","0px")):e.isExpanded!==f.current&&(e.isExpanded?(t.removeAttribute("hidden"),t.style.setProperty("--disclosure-panel-width",t.scrollWidth+"px"),t.style.setProperty("--disclosure-panel-height",t.scrollHeight+"px"),Promise.all(t.getAnimations().map(x=>x.finished)).then(()=>{t.style.setProperty("--disclosure-panel-width","auto"),t.style.setProperty("--disclosure-panel-height","auto")}).catch(()=>{})):(t.style.setProperty("--disclosure-panel-width",t.scrollWidth+"px"),t.style.setProperty("--disclosure-panel-height",t.scrollHeight+"px"),window.getComputedStyle(t).height,t.style.setProperty("--disclosure-panel-width","0px"),t.style.setProperty("--disclosure-panel-height","0px"),Promise.all(t.getAnimations().map(x=>x.finished)).then(()=>t.setAttribute("hidden","until-found")).catch(()=>{}))),f.current=e.isExpanded}},[a,d,e.isExpanded,r]),i.useEffect(()=>()=>{o.current&&cancelAnimationFrame(o.current)},[]),{buttonProps:{id:s,"aria-expanded":e.isExpanded,"aria-controls":n,onPress:t=>{!a&&t.pointerType!=="keyboard"&&e.toggle()},isDisabled:a,onPressStart(t){t.pointerType==="keyboard"&&!a&&e.toggle()}},panelProps:{id:n,role:"group","aria-labelledby":s,"aria-hidden":!e.isExpanded,hidden:r?!e.isExpanded:void 0}}}function H(l){let[e,d]=A(l.isExpanded,l.defaultExpanded||!1,l.onExpandedChange);const a=i.useCallback(()=>{d(!0)},[d]),s=i.useCallback(()=>{d(!1)},[d]),n=i.useCallback(()=>{d(!e)},[d,e]);return{isExpanded:e,setExpanded:d,expand:a,collapse:s,toggle:n}}function z(l){let{allowsMultipleExpanded:e=!1,isDisabled:d=!1}=l,[a,s]=A(i.useMemo(()=>l.expandedKeys?new Set(l.expandedKeys):void 0,[l.expandedKeys]),i.useMemo(()=>l.defaultExpandedKeys?new Set(l.defaultExpandedKeys):new Set,[l.defaultExpandedKeys]),l.onExpandedChange);return i.useEffect(()=>{if(!e&&a.size>1){let n=a.values().next().value;n!=null&&s(new Set([n]))}}),{allowsMultipleExpanded:e,isDisabled:d,expandedKeys:a,setExpandedKeys:s,toggleKey(n){let r;e?(r=new Set(a),r.has(n)?r.delete(n):r.add(n)):r=new Set(a.has(n)?[]:[n]),s(r)}}}const R=i.createContext(null),O=i.forwardRef(function(e,d){let a=z(e),s=h({...e,defaultClassName:"react-aria-DisclosureGroup",values:{isDisabled:a.isDisabled,state:a}}),n=m(e,{global:!0});return p.createElement(y.div,{...n,...s,ref:d,"data-disabled":e.isDisabled||void 0},p.createElement(R.Provider,{value:a},s.children))}),J=i.createContext(null),L=i.createContext(null),K=i.createContext(null),Q=i.forwardRef(function(e,d){[e,d]=V(e,d,J);let a=i.useContext(R),{id:s,...n}=e,r=$();s||(s=r);let o=a?a.expandedKeys.has(s):e.isExpanded,c=H({...e,isExpanded:o,onExpandedChange(N){var b;a&&a.toggleKey(s),(b=e.onExpandedChange)===null||b===void 0||b.call(e,N)}}),f=p.useRef(null),t=e.isDisabled||(a==null?void 0:a.isDisabled)||!1,{buttonProps:x,panelProps:S}=G({...e,isExpanded:o,isDisabled:t},c,f),{isFocusVisible:g,focusProps:j}=w({within:!0}),E=h({...e,id:void 0,defaultClassName:"react-aria-Disclosure",values:{isExpanded:c.isExpanded,isDisabled:t,isFocusVisibleWithin:g,state:c}}),F=m(n,{global:!0});return p.createElement(D,{values:[[v,{slots:{[T]:{},trigger:x}}],[K,{panelProps:S,panelRef:f}],[L,c]]},p.createElement(y.div,{...C(F,E,j),ref:d,"data-expanded":c.isExpanded||void 0,"data-disabled":t||void 0,"data-focus-visible-within":g||void 0},E.children))}),U=i.forwardRef(function(e,d){let{role:a="group"}=e,{panelProps:s,panelRef:n}=i.useContext(K),{isFocusVisible:r,focusProps:o}=w({within:!0}),c=h({...e,defaultClassName:"react-aria-DisclosurePanel",values:{isFocusVisibleWithin:r}}),f=m(e,{global:!0,labelable:!0});return p.createElement(y.div,{...C(f,c,s,o),ref:q(d,n),role:a,"data-focus-visible-within":r||void 0},p.createElement(D,{values:[[v,null]]},e.children))});function X({items:l,allowsMultipleExpanded:e=!1,className:d}){return u.jsx(O,{allowsMultipleExpanded:e,className:P("flex flex-col divide-y divide-[var(--bps-gray-200)] border border-[var(--bps-gray-200)] rounded",d),children:l.map(a=>u.jsx(Q,{id:a.id,children:({isExpanded:s})=>u.jsxs(u.Fragment,{children:[u.jsxs(M,{slot:"trigger",className:"flex w-full items-center justify-between px-4 py-3 text-sm font-medium text-[var(--bps-gray-700)] hover:bg-[var(--bps-gray-50)] transition-colors cursor-default outline-none focus-visible:bg-[var(--bps-gray-100)]",children:[u.jsx("span",{children:a.title}),u.jsx(B,{className:P("w-4 h-4 text-[var(--bps-gray-400)] transition-transform duration-200",s&&"rotate-180")})]}),u.jsx(U,{className:"px-4 pb-3 text-sm text-[var(--bps-gray-600)]",children:a.content})]})},a.id))})}X.__docgenInfo={description:"",methods:[],displayName:"Accordion",props:{items:{required:!0,tsType:{name:"Array",elements:[{name:"AccordionItem"}],raw:"AccordionItem[]"},description:""},allowsMultipleExpanded:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""}}};export{X as A};
