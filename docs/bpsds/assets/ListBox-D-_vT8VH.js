import{c as fe,b as he,r as S,a as ge,d as J,$ as B,A as X,e as ve,N as be,O as $e,t as Z,P as Y,M as pe,s as ee,F as te,Q as ye,v as F,w as L,B as le,C as xe,u as me,I as De}from"./Hidden-CJaOgpXL.js";import{$ as Pe,a as Ke,b as ie,c as H,f as we}from"./Collection-fWoy327B.js";import{r as s,R as u}from"./index-Dx_1l3Sb.js";import{b as Ce}from"./RSPContexts-DBLJ5UHR.js";import{a as Me,$ as Be}from"./SelectionIndicator-ESC2ylKy.js";import{a as Ie,b as Le,c as Se}from"./BaseCollection-CeOO3hBE.js";import{e as Ee,c as Ne}from"./Text-CtOaLkQJ.js";import{$ as Fe}from"./getScrollParent-DdL0gCo3.js";import{d as Oe,a as Re,e as Ve,$ as Te,f as Ae,b as _e,c as Ue}from"./useListState-gccbm2BF.js";import{$ as Q}from"./keyboard-cyfF21E4.js";import{$ as oe}from"./context-BGnht7tc.js";import{a as ke}from"./FocusScope-DkXgkvhN.js";function ze(o,e){let{collection:t,onLoadMore:l,scrollOffset:i=1}=o,a=s.useRef(null),r=fe(n=>{for(let d of n)d.isIntersecting&&l&&l()});he(()=>(e.current&&(a.current=new IntersectionObserver(r,{root:Fe(e==null?void 0:e.current),rootMargin:`0px ${100*i}% ${100*i}% ${100*i}%`}),a.current.observe(e.current)),()=>{a.current&&a.current.disconnect()}),[t,e,i])}let z=new Map;function ae(o){let{locale:e}=oe(),t=e+(o?Object.entries(o).sort((i,a)=>i[0]<a[0]?-1:1).join():"");if(z.has(t))return z.get(t);let l=new Intl.Collator(e,o);return z.set(t,l),l}const W=new WeakMap;function He(o){return typeof o=="string"?o.replace(/\s*/g,""):""+o}function We(o,e){let t=W.get(o);if(!t)throw new Error("Unknown list");return`${t.id}-option-${He(e)}`}class q{getItemRect(e){let t=this.ref.current;if(!t)return null;let l=e!=null?Oe(this.ref,e):null;if(!l)return null;let i=t.getBoundingClientRect(),a=l.getBoundingClientRect();return{x:a.left-i.left-t.clientLeft+t.scrollLeft,y:a.top-i.top-t.clientTop+t.scrollTop,width:a.width,height:a.height}}getContentSize(){let e=this.ref.current;var t,l;return{width:(t=e==null?void 0:e.scrollWidth)!==null&&t!==void 0?t:0,height:(l=e==null?void 0:e.scrollHeight)!==null&&l!==void 0?l:0}}getVisibleRect(){let e=this.ref.current;var t,l,i,a;return{x:(t=e==null?void 0:e.scrollLeft)!==null&&t!==void 0?t:0,y:(l=e==null?void 0:e.scrollTop)!==null&&l!==void 0?l:0,width:(i=e==null?void 0:e.clientWidth)!==null&&i!==void 0?i:0,height:(a=e==null?void 0:e.clientHeight)!==null&&a!==void 0?a:0}}constructor(e){this.ref=e}}class re{isDisabled(e){var t;return this.disabledBehavior==="all"&&(((t=e.props)===null||t===void 0?void 0:t.isDisabled)||this.disabledKeys.has(e.key))}findNextNonDisabled(e,t){let l=e;for(;l!=null;){let i=this.collection.getItem(l);if((i==null?void 0:i.type)==="item"&&!this.isDisabled(i))return l;l=t(l)}return null}getNextKey(e){let t=e;return t=this.collection.getKeyAfter(t),this.findNextNonDisabled(t,l=>this.collection.getKeyAfter(l))}getPreviousKey(e){let t=e;return t=this.collection.getKeyBefore(t),this.findNextNonDisabled(t,l=>this.collection.getKeyBefore(l))}findKey(e,t,l){let i=e,a=this.layoutDelegate.getItemRect(i);if(!a||i==null)return null;let r=a;do{if(i=t(i),i==null)break;a=this.layoutDelegate.getItemRect(i)}while(a&&l(r,a)&&i!=null);return i}isSameRow(e,t){return e.y===t.y||e.x!==t.x}isSameColumn(e,t){return e.x===t.x||e.y!==t.y}getKeyBelow(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getNextKey(t),this.isSameRow):this.getNextKey(e)}getKeyAbove(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getPreviousKey(t),this.isSameRow):this.getPreviousKey(e)}getNextColumn(e,t){return t?this.getPreviousKey(e):this.getNextKey(e)}getKeyRightOf(e){let t=this.direction==="ltr"?"getKeyRightOf":"getKeyLeftOf";return this.layoutDelegate[t]?(e=this.layoutDelegate[t](e),this.findNextNonDisabled(e,l=>this.layoutDelegate[t](l))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="rtl"):this.findKey(e,l=>this.getNextColumn(l,this.direction==="rtl"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="rtl"):null}getKeyLeftOf(e){let t=this.direction==="ltr"?"getKeyLeftOf":"getKeyRightOf";return this.layoutDelegate[t]?(e=this.layoutDelegate[t](e),this.findNextNonDisabled(e,l=>this.layoutDelegate[t](l))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="ltr"):this.findKey(e,l=>this.getNextColumn(l,this.direction==="ltr"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="ltr"):null}getFirstKey(){let e=this.collection.getFirstKey();return this.findNextNonDisabled(e,t=>this.collection.getKeyAfter(t))}getLastKey(){let e=this.collection.getLastKey();return this.findNextNonDisabled(e,t=>this.collection.getKeyBefore(t))}getKeyPageAbove(e){let t=this.ref.current,l=this.layoutDelegate.getItemRect(e);if(!l)return null;if(t&&!Q(t))return this.getFirstKey();let i=e;if(this.orientation==="horizontal"){let a=Math.max(0,l.x+l.width-this.layoutDelegate.getVisibleRect().width);for(;l&&l.x>a&&i!=null;)i=this.getKeyAbove(i),l=i==null?null:this.layoutDelegate.getItemRect(i)}else{let a=Math.max(0,l.y+l.height-this.layoutDelegate.getVisibleRect().height);for(;l&&l.y>a&&i!=null;)i=this.getKeyAbove(i),l=i==null?null:this.layoutDelegate.getItemRect(i)}return i??this.getFirstKey()}getKeyPageBelow(e){let t=this.ref.current,l=this.layoutDelegate.getItemRect(e);if(!l)return null;if(t&&!Q(t))return this.getLastKey();let i=e;if(this.orientation==="horizontal"){let a=Math.min(this.layoutDelegate.getContentSize().width,l.y-l.width+this.layoutDelegate.getVisibleRect().width);for(;l&&l.x<a&&i!=null;)i=this.getKeyBelow(i),l=i==null?null:this.layoutDelegate.getItemRect(i)}else{let a=Math.min(this.layoutDelegate.getContentSize().height,l.y-l.height+this.layoutDelegate.getVisibleRect().height);for(;l&&l.y<a&&i!=null;)i=this.getKeyBelow(i),l=i==null?null:this.layoutDelegate.getItemRect(i)}return i??this.getLastKey()}getKeyForSearch(e,t){if(!this.collator)return null;let l=this.collection,i=t||this.getFirstKey();for(;i!=null;){let a=l.getItem(i);if(!a)return null;let r=a.textValue.slice(0,e.length);if(a.textValue&&this.collator.compare(r,e)===0)return i;i=this.getNextKey(i)}return null}constructor(...e){if(e.length===1){let t=e[0];this.collection=t.collection,this.ref=t.ref,this.collator=t.collator,this.disabledKeys=t.disabledKeys||new Set,this.disabledBehavior=t.disabledBehavior||"all",this.orientation=t.orientation||"vertical",this.direction=t.direction,this.layout=t.layout||"stack",this.layoutDelegate=t.layoutDelegate||new q(t.ref)}else this.collection=e[0],this.disabledKeys=e[1],this.ref=e[2],this.collator=e[3],this.layout="stack",this.orientation="vertical",this.disabledBehavior="all",this.layoutDelegate=new q(this.ref);this.layout==="stack"&&this.orientation==="vertical"&&(this.getKeyLeftOf=void 0,this.getKeyRightOf=void 0)}}function je(o){let{selectionManager:e,collection:t,disabledKeys:l,ref:i,keyboardDelegate:a,layoutDelegate:r}=o,n=ae({usage:"search",sensitivity:"base"}),d=e.disabledBehavior,f=s.useMemo(()=>a||new re({collection:t,disabledKeys:l,disabledBehavior:d,ref:i,collator:n,layoutDelegate:r}),[a,r,t,l,i,n,d]),{collectionProps:h}=Re({...o,ref:i,selectionManager:e,keyboardDelegate:f});return{listProps:h}}function Xe(o,e,t){let l=S(o,{labelable:!0}),i=o.selectionBehavior||"toggle",a=o.linkBehavior||(i==="replace"?"action":"override");i==="toggle"&&a==="action"&&(a="override");let{listProps:r}=je({...o,ref:t,selectionManager:e.selectionManager,collection:e.collection,disabledKeys:e.disabledKeys,linkBehavior:a}),{focusWithinProps:n}=ge({onFocusWithin:o.onFocus,onBlurWithin:o.onBlur,onFocusWithinChange:o.onFocusChange}),d=J(o.id);W.set(e,{id:d,shouldUseVirtualFocus:o.shouldUseVirtualFocus,shouldSelectOnPressUp:o.shouldSelectOnPressUp,shouldFocusOnHover:o.shouldFocusOnHover,isVirtualized:o.isVirtualized,onAction:o.onAction,linkBehavior:a,UNSTABLE_itemBehavior:o.UNSTABLE_itemBehavior});let{labelProps:f,fieldProps:h}=Ee({...o,id:d,labelElementType:"span"});return{labelProps:f,listBoxProps:B(l,n,e.selectionManager.selectionMode==="multiple"?{"aria-multiselectable":"true"}:{},{role:"listbox",...B(h,r)})}}const G=new WeakMap;function Ye(o){let e=G.get(o);if(e!=null)return e;let t=0,l=i=>{for(let a of i)a.type==="section"?l(Ve(a,o)):a.type==="item"&&t++};return l(o),G.set(o,t),t}function Qe(o,e,t){var l,i;let{key:a}=o,r=W.get(e);var n;let d=(n=o.isDisabled)!==null&&n!==void 0?n:e.selectionManager.isDisabled(a);var f;let h=(f=o.isSelected)!==null&&f!==void 0?f:e.selectionManager.isSelected(a);var c;let g=(c=o.shouldSelectOnPressUp)!==null&&c!==void 0?c:r==null?void 0:r.shouldSelectOnPressUp;var p;let $=(p=o.shouldFocusOnHover)!==null&&p!==void 0?p:r==null?void 0:r.shouldFocusOnHover;var m;let D=(m=o.shouldUseVirtualFocus)!==null&&m!==void 0?m:r==null?void 0:r.shouldUseVirtualFocus;var b;let K=(b=o.isVirtualized)!==null&&b!==void 0?b:r==null?void 0:r.isVirtualized,w=X(),C=X(),y={role:"option","aria-disabled":d||void 0,"aria-selected":e.selectionManager.selectionMode!=="none"?h:void 0};ve()&&be()||(y["aria-label"]=o["aria-label"],y["aria-labelledby"]=w,y["aria-describedby"]=C);let v=e.collection.getItem(a);if(K){let P=Number(v==null?void 0:v.index);y["aria-posinset"]=Number.isNaN(P)?void 0:P+1,y["aria-setsize"]=Ye(e.collection)}let x=r!=null&&r.onAction?()=>{var P;return r==null||(P=r.onAction)===null||P===void 0?void 0:P.call(r,a)}:void 0,M=We(e,a),{itemProps:E,isPressed:R,isFocused:N,hasAction:U,allowsSelection:V}=Te({selectionManager:e.selectionManager,key:a,ref:t,shouldSelectOnPressUp:g,allowsDifferentPressOrigin:g&&$,isVirtualized:K,shouldUseVirtualFocus:D,isDisabled:d,onAction:x||!(v==null||(l=v.props)===null||l===void 0)&&l.onAction?$e(v==null||(i=v.props)===null||i===void 0?void 0:i.onAction,x):void 0,linkBehavior:r==null?void 0:r.linkBehavior,UNSTABLE_itemBehavior:r==null?void 0:r.UNSTABLE_itemBehavior,id:M}),{hoverProps:T}=Z({isDisabled:d||!$,onHoverStart(){Y()||(e.selectionManager.setFocused(!0),e.selectionManager.setFocusedKey(a))}}),I=S(v==null?void 0:v.props);delete I.id;let A=pe(v==null?void 0:v.props);return{optionProps:{...y,...B(I,E,T,A),id:M},labelProps:{id:w},descriptionProps:{id:C},isFocused:N,isFocusVisible:N&&e.selectionManager.isFocused&&Y(),isSelected:h,isDisabled:d,isPressed:R,allowsSelection:V,hasAction:U}}function qe(o){let{heading:e,"aria-label":t}=o,l=J();return{itemProps:{role:"presentation"},headingProps:e?{id:l,role:"presentation",onMouseDown:i=>{i.preventDefault()}}:{},groupProps:{role:"group","aria-label":t,"aria-labelledby":e?l:void 0}}}const _=s.createContext({}),ne=s.createContext(null),Ge=s.forwardRef(function(e,t){let{render:l}=s.useContext(ne);return u.createElement(u.Fragment,null,l(e,t))});function se(o,e){var t;let l=o==null?void 0:o.renderDropIndicator,i=o==null||(t=o.isVirtualDragging)===null||t===void 0?void 0:t.call(o),a=s.useCallback(r=>{if(i||e!=null&&e.isDropTarget(r))return l?l(r):u.createElement(Ge,{target:r})},[e==null?void 0:e.target,i,l]);return o!=null&&o.useDropIndicator?a:void 0}function Je(o,e,t){var l,i;let a=o.focusedKey,r=null;if(!(e==null||(l=e.isVirtualDragging)===null||l===void 0)&&l.call(e)&&(t==null||(i=t.target)===null||i===void 0?void 0:i.type)==="item"&&(r=t.target.key,t.target.dropPosition==="after")){let c=t.collection.getKeyAfter(r),g=null;if(c!=null){var n,d;let p=(d=(n=t.collection.getItem(r))===null||n===void 0?void 0:n.level)!==null&&d!==void 0?d:0;for(;c;){let $=t.collection.getItem(c);if(!$)break;if($.type!=="item"){c=t.collection.getKeyAfter(c);continue}var f;if(((f=$.level)!==null&&f!==void 0?f:0)<=p)break;g=c,c=t.collection.getKeyAfter(c)}}var h;r=(h=c??g)!==null&&h!==void 0?h:r}return s.useMemo(()=>new Set([a,r].filter(c=>c!=null)),[a,r])}const Ze=s.createContext({}),et=s.createContext({});class tt extends Ie{filter(e,t){let l=t.getItem(this.prevKey);if(l&&l.type!=="separator"){let i=this.clone();return t.addDescendants(i,e),i}return null}}tt.type="separator";const de=s.createContext(null),O=s.createContext(null),yt=s.forwardRef(function(e,t){[e,t]=ee(e,t,de);let l=s.useContext(O);return l?u.createElement(ce,{state:l,props:e,listBoxRef:t}):u.createElement(Pe,{content:u.createElement(Ke,e)},i=>u.createElement(lt,{props:e,listBoxRef:t,collection:i}))});function lt({props:o,listBoxRef:e,collection:t}){o={...o,collection:t,children:null,items:null};let{layoutDelegate:l}=s.useContext(H),i=_e({...o,layoutDelegate:l});return u.createElement(ce,{state:i,props:o,listBoxRef:e})}function ce({state:o,props:e,listBoxRef:t}){[e,t]=ee(e,t,Ce);let{dragAndDropHooks:l,layout:i="stack",orientation:a="vertical",filter:r}=e,n=Ae(o,r),{collection:d,selectionManager:f}=n,h=!!(l!=null&&l.useDraggableCollectionState),c=!!(l!=null&&l.useDroppableCollectionState),{direction:g}=oe(),{disabledBehavior:p,disabledKeys:$}=f,m=ae({usage:"search",sensitivity:"base"}),{isVirtualized:D,layoutDelegate:b,dropTargetDelegate:K,CollectionRoot:w}=s.useContext(H),C=s.useMemo(()=>e.keyboardDelegate||new re({collection:d,collator:m,ref:t,disabledKeys:$,disabledBehavior:p,layout:i,orientation:a,direction:g,layoutDelegate:b}),[d,m,t,p,$,a,g,e.keyboardDelegate,i,b]),{listBoxProps:y}=Xe({...e,shouldSelectOnPressUp:h||e.shouldSelectOnPressUp,keyboardDelegate:C,isVirtualized:D},n,t);s.useRef(h),s.useRef(c),s.useEffect(()=>{},[h,c]);let v,x,M,E=!1,R=null,N=s.useRef(null);if(h&&l){v=l.useDraggableCollectionState({collection:d,selectionManager:f,preview:l.renderDragPreview?N:void 0}),l.useDraggableCollection({},v,t);let k=l.DragPreview;R=l.renderDragPreview?u.createElement(k,{ref:N},l.renderDragPreview):null}if(c&&l){x=l.useDroppableCollectionState({collection:d,selectionManager:f});let k=l.dropTargetDelegate||K||new l.ListDropTargetDelegate(d,t,{orientation:a,layout:i,direction:g});M=l.useDroppableCollection({keyboardDelegate:C,dropTargetDelegate:k},x,t),E=x.isDropTarget({type:"root"})}let{focusProps:U,isFocused:V,isFocusVisible:T}=me(),I=n.collection.size===0,A={isDropTarget:E,isEmpty:I,isFocused:V,isFocusVisible:T,layout:e.layout||"stack",state:n},P=F({...e,children:void 0,defaultClassName:"react-aria-ListBox",values:A}),j=null;I&&e.renderEmptyState&&(j=u.createElement("div",{role:"option",style:{display:"contents"}},e.renderEmptyState(A)));let ue=S(e,{global:!0});return u.createElement(ke,null,u.createElement(L.div,{...B(ue,P,y,U,M==null?void 0:M.collectionProps),ref:t,slot:e.slot||void 0,onScroll:e.onScroll,"data-drop-target":E||void 0,"data-empty":I||void 0,"data-focused":V||void 0,"data-focus-visible":T||void 0,"data-layout":e.layout||"stack","data-orientation":e.orientation||"vertical"},u.createElement(le,{values:[[de,e],[O,n],[_,{dragAndDropHooks:l,dragState:v,dropState:x}],[et,{elementType:"div"}],[ne,{render:ot}],[we,{name:"ListBoxSection",render:it}]]},u.createElement(Be,null,u.createElement(w,{collection:d,scrollRef:t,persistedKeys:Je(f,l,x),renderDropIndicator:se(l,x)}))),j,R))}function it(o,e,t,l="react-aria-ListBoxSection"){let i=s.useContext(O),{dragAndDropHooks:a,dropState:r}=s.useContext(_),{CollectionBranch:n}=s.useContext(H),[d,f]=De();var h;let{headingProps:c,groupProps:g}=qe({heading:f,"aria-label":(h=o["aria-label"])!==null&&h!==void 0?h:void 0}),p=F({...o,id:void 0,children:void 0,defaultClassName:l,values:void 0}),$=S(o,{global:!0});return delete $.id,u.createElement(L.section,{...B($,p,g),ref:e},u.createElement(Ze.Provider,{value:{...c,ref:d}},u.createElement(n,{collection:i.collection,parent:t,renderDropIndicator:se(a,r)})))}const xt=ie(Le,function(e,t,l){let i=te(t),a=s.useContext(O),{dragAndDropHooks:r,dragState:n,dropState:d}=s.useContext(_),{optionProps:f,labelProps:h,descriptionProps:c,...g}=Qe({key:l.key,"aria-label":e==null?void 0:e["aria-label"]},a,i),{hoverProps:p,isHovered:$}=Z({isDisabled:!g.allowsSelection&&!g.hasAction,onHoverStart:l.props.onHoverStart,onHoverChange:l.props.onHoverChange,onHoverEnd:l.props.onHoverEnd}),{focusProps:m}=ye(e),D=null;n&&r&&(D=r.useDraggableItem({key:l.key,hasAction:g.hasAction},n));let b=null;d&&r&&(b=r.useDroppableItem({target:{type:"item",key:l.key,dropPosition:"on"}},d,i));let K=n&&n.isDragging(l.key),w=F({...e,id:void 0,children:e.children,defaultClassName:"react-aria-ListBoxItem",values:{...g,isHovered:$,selectionMode:a.selectionManager.selectionMode,selectionBehavior:a.selectionManager.selectionBehavior,allowsDragging:!!n,isDragging:K,isDropTarget:b==null?void 0:b.isDropTarget}});s.useEffect(()=>{l.textValue},[l.textValue]);let C=e.href?L.a:L.div,y=S(e,{global:!0});return delete y.id,delete y.onClick,e.href&&f.tabIndex==null&&(f.tabIndex=-1),u.createElement(C,{...B(y,w,f,p,m,D==null?void 0:D.dragProps,b==null?void 0:b.dropProps),ref:i,"data-allows-dragging":!!n||void 0,"data-selected":g.isSelected||void 0,"data-disabled":g.isDisabled||void 0,"data-hovered":$||void 0,"data-focused":g.isFocused||void 0,"data-focus-visible":g.isFocusVisible||void 0,"data-pressed":g.isPressed||void 0,"data-dragging":K||void 0,"data-drop-target":(b==null?void 0:b.isDropTarget)||void 0,"data-selection-mode":a.selectionManager.selectionMode==="none"?void 0:a.selectionManager.selectionMode},u.createElement(le,{values:[[Ne,{slots:{[xe]:h,label:h,description:c}}],[Me,{isSelected:g.isSelected}]]},w.children))});function ot(o,e){e=te(e);let{dragAndDropHooks:t,dropState:l}=s.useContext(_),{dropIndicatorProps:i,isHidden:a,isDropTarget:r}=t.useDropIndicator(o,l,e);return a?null:u.createElement(rt,{...o,dropIndicatorProps:i,isDropTarget:r,ref:e})}function at(o,e){let{dropIndicatorProps:t,isDropTarget:l,...i}=o,a=F({...i,defaultClassName:"react-aria-DropIndicator",values:{isDropTarget:l}});return u.createElement(L.div,{...t,...a,role:"option",ref:e,"data-drop-target":l||void 0})}const rt=s.forwardRef(at);ie(Se,function(e,t,l){let i=s.useContext(O),{isLoading:a,onLoadMore:r,scrollOffset:n,...d}=e,f=s.useRef(null),h=s.useMemo(()=>({onLoadMore:r,collection:i==null?void 0:i.collection,sentinelRef:f,scrollOffset:n}),[r,n,i==null?void 0:i.collection]);ze(h,f);let c=F({...d,id:void 0,children:l.rendered,defaultClassName:"react-aria-ListBoxLoadingIndicator",values:void 0}),g={tabIndex:-1};return u.createElement(u.Fragment,null,u.createElement("div",{style:{position:"relative",width:0,height:0},inert:Ue(!0)},u.createElement("div",{"data-testid":"loadMoreSentinel",ref:f,style:{position:"absolute",height:1,width:1}})),a&&c.children&&u.createElement(L.div,{...B(S(e,{global:!0}),g),...c,role:"option",ref:t},c.children))});export{ae as $,re as a,de as b,O as c,yt as d,xt as e,je as f};
