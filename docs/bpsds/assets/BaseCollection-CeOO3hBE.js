class o{get childNodes(){throw new Error("childNodes is not supported")}clone(){let e=new this.constructor(this.key);return e.value=this.value,e.level=this.level,e.hasChildNodes=this.hasChildNodes,e.rendered=this.rendered,e.textValue=this.textValue,e["aria-label"]=this["aria-label"],e.index=this.index,e.parentKey=this.parentKey,e.prevKey=this.prevKey,e.nextKey=this.nextKey,e.firstChildKey=this.firstChildKey,e.lastChildKey=this.lastChildKey,e.props=this.props,e.render=this.render,e.colSpan=this.colSpan,e.colIndex=this.colIndex,e}filter(e,t,i){let l=this.clone();return t.addDescendants(l,e),l}constructor(e){this.value=null,this.level=0,this.hasChildNodes=!1,this.rendered=null,this.textValue="",this["aria-label"]=void 0,this.index=0,this.parentKey=null,this.prevKey=null,this.nextKey=null,this.firstChildKey=null,this.lastChildKey=null,this.props={},this.colSpan=null,this.colIndex=null,this.type=this.constructor.type,this.key=e}}class y extends o{filter(e,t,i){let[l,n]=u(e,t,this.firstChildKey,i),d=this.clone();return d.firstChildKey=l,d.lastChildKey=n,d}}class f extends o{}f.type="header";class p extends o{}p.type="loader";class K extends y{filter(e,t,i){if(i(this.textValue,this)){let l=this.clone();return t.addDescendants(l,e),l}return null}}K.type="item";class c extends y{filter(e,t,i){let l=super.filter(e,t,i);if(l&&l.lastChildKey!==null){let n=e.getItem(l.lastChildKey);if(n&&n.type!=="header")return l}return null}}c.type="section";class v{get size(){return this.itemCount}getKeys(){return this.keyMap.keys()}*[Symbol.iterator](){let e=this.firstKey!=null?this.keyMap.get(this.firstKey):void 0;for(;e;)yield e,e=e.nextKey!=null?this.keyMap.get(e.nextKey):void 0}getChildren(e){let t=this.keyMap;return{*[Symbol.iterator](){let i=t.get(e),l=(i==null?void 0:i.firstChildKey)!=null?t.get(i.firstChildKey):null;for(;l;)yield l,l=l.nextKey!=null?t.get(l.nextKey):void 0}}}getKeyBefore(e){let t=this.keyMap.get(e);if(!t)return null;if(t.prevKey!=null){for(t=this.keyMap.get(t.prevKey);t&&t.type!=="item"&&t.lastChildKey!=null;)t=this.keyMap.get(t.lastChildKey);var i;return(i=t==null?void 0:t.key)!==null&&i!==void 0?i:null}return t.parentKey}getKeyAfter(e){let t=this.keyMap.get(e);if(!t)return null;if(t.type!=="item"&&t.firstChildKey!=null)return t.firstChildKey;for(;t;){if(t.nextKey!=null)return t.nextKey;if(t.parentKey!=null)t=this.keyMap.get(t.parentKey);else return null}return null}getFirstKey(){return this.firstKey}getLastKey(){let e=this.lastKey!=null?this.keyMap.get(this.lastKey):null;for(;(e==null?void 0:e.lastChildKey)!=null;)e=this.keyMap.get(e.lastChildKey);var t;return(t=e==null?void 0:e.key)!==null&&t!==void 0?t:null}getItem(e){var t;return(t=this.keyMap.get(e))!==null&&t!==void 0?t:null}at(){throw new Error("Not implemented")}clone(){let e=this.constructor,t=new e;return t.keyMap=new Map(this.keyMap),t.firstKey=this.firstKey,t.lastKey=this.lastKey,t.itemCount=this.itemCount,t}addNode(e){if(this.frozen)throw new Error("Cannot add a node to a frozen collection");e.type==="item"&&this.keyMap.get(e.key)==null&&this.itemCount++,this.keyMap.set(e.key,e)}addDescendants(e,t){this.addNode(e);let i=t.getChildren(e.key);for(let l of i)this.addDescendants(l,t)}removeNode(e){if(this.frozen)throw new Error("Cannot remove a node to a frozen collection");let t=this.keyMap.get(e);t!=null&&t.type==="item"&&this.itemCount--,this.keyMap.delete(e)}commit(e,t,i=!1){if(this.frozen)throw new Error("Cannot commit a frozen collection");this.firstKey=e,this.lastKey=t,this.frozen=!i}filter(e){let t=new this.constructor,[i,l]=u(this,t,this.firstKey,e);return t==null||t.commit(i,l),t}constructor(){this.keyMap=new Map,this.firstKey=null,this.lastKey=null,this.frozen=!1,this.itemCount=0}}function u(s,e,t,i){if(t==null)return[null,null];let l=null,n=null,d=s.getItem(t);for(;d!=null;){let r=d.filter(s,e,i);r!=null&&(r.nextKey=null,n&&(r.prevKey=n.key,n.nextKey=r.key),l==null&&(l=r),e.addNode(r),n=r),d=d.nextKey?s.getItem(d.nextKey):null}if(n&&n.type==="separator"){let r=n.prevKey;e.removeNode(n.key),r?(n=e.getItem(r),n.nextKey=null):n=null}var h,a;return[(h=l==null?void 0:l.key)!==null&&h!==void 0?h:null,(a=n==null?void 0:n.key)!==null&&a!==void 0?a:null]}export{v as $,o as a,K as b,p as c};
