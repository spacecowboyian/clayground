import{a as _}from"./RSPContexts-Dr342rEE.js";import{$ as y,d as F,i as k,m as j,n as w,j as S,c as H,a as N,e as T}from"./utils-LaqegW2K.js";import{a as O,b as W,c as p,d as z,$ as A}from"./Form-C-hz59zZ.js";import{r as f,R as V}from"./index-Dq4ZvVuH.js";import{$ as G}from"./usePress-B20iDxoD.js";import{$ as J}from"./useToggle-C9uo3gsR.js";import{$ as q}from"./useToggleState-bM5DcLtG.js";import{j as K,i as L}from"./useFocusRing-ubySK4Mk.js";import{$ as Q}from"./VisuallyHidden-Bfe7IVUU.js";function g(i,e,d){let t=O({...i,value:e.isSelected}),{isInvalid:x,validationErrors:h,validationDetails:c}=t.displayValidation,{labelProps:u,inputProps:o,isSelected:n,isPressed:r,isDisabled:$,isReadOnly:v}=J({...i,isInvalid:x},e,d);W(i,t,d);let{isIndeterminate:b,isRequired:s,validationBehavior:l="aria"}=i;f.useEffect(()=>{d.current&&(d.current.indeterminate=!!b)});let{pressProps:m}=G({isDisabled:$||v,onPress(){let{[p]:a}=i,{commitValidation:P}=a||t;P()}});return{labelProps:y(u,m,f.useMemo(()=>({onMouseDown:a=>a.preventDefault()}),[])),inputProps:{...o,checked:n,"aria-required":s&&l==="aria"||void 0,required:s&&l==="native"},isSelected:n,isPressed:r,isDisabled:$,isReadOnly:v,isInvalid:x,validationErrors:h,validationDetails:c}}const U=new WeakMap;function X(i,e,d){const t=q({isReadOnly:i.isReadOnly||e.isReadOnly,isSelected:e.isSelected(i.value),defaultSelected:e.defaultValue.includes(i.value),onChange(a){a?e.addValue(i.value):e.removeValue(i.value),i.onChange&&i.onChange(a)}});let{name:x,form:h,descriptionId:c,errorMessageId:u,validationBehavior:o}=U.get(e);var n;o=(n=i.validationBehavior)!==null&&n!==void 0?n:o;let{realtimeValidation:r}=O({...i,value:t.isSelected,name:void 0,validationBehavior:"aria"}),$=f.useRef(z),v=()=>{e.setInvalid(i.value,r.isInvalid?r:$.current)};f.useEffect(v);let b=e.realtimeValidation.isInvalid?e.realtimeValidation:r,s=o==="native"?e.displayValidation:b;var l;let m=g({...i,isReadOnly:i.isReadOnly||e.isReadOnly,isDisabled:i.isDisabled||e.isDisabled,name:i.name||x,form:i.form||h,isRequired:(l=i.isRequired)!==null&&l!==void 0?l:e.isRequired,validationBehavior:o,[p]:{realtimeValidation:b,displayValidation:s,resetValidation:e.resetValidation,commitValidation:e.commitValidation,updateValidation(a){$.current=a,v()}}},t,d);return{...m,inputProps:{...m.inputProps,"aria-describedby":[i["aria-describedby"],e.isInvalid?u:null,c].filter(Boolean).join(" ")||void 0}}}const Y=f.createContext(null),oe=f.forwardRef(function(e,d){let{inputRef:t=null,...x}=e;[e,d]=F(x,d,_);let{validationBehavior:h}=k(A)||{};var c,u;let o=(u=(c=e.validationBehavior)!==null&&c!==void 0?c:h)!==null&&u!==void 0?u:"native",n=f.useContext(Y),r=j(f.useMemo(()=>w(t,e.inputRef!==void 0?e.inputRef:null),[t,e.inputRef])),{labelProps:$,inputProps:v,isSelected:b,isDisabled:s,isReadOnly:l,isPressed:m,isInvalid:a}=n?X({...S(e),value:e.value,children:typeof e.children=="function"?!0:e.children},n,r):g({...S(e),children:typeof e.children=="function"?!0:e.children,validationBehavior:o},q(e),r),{isFocused:P,isFocusVisible:I,focusProps:C}=K(),E=s||l,{hoverProps:M,isHovered:D}=L({...e,isDisabled:E}),B=H({...e,defaultClassName:"react-aria-Checkbox",values:{isSelected:b,isIndeterminate:e.isIndeterminate||!1,isPressed:m,isHovered:D,isFocused:P,isFocusVisible:I,isDisabled:s,isReadOnly:l,isInvalid:a,isRequired:e.isRequired||!1}}),R=N(e,{global:!0});return delete R.id,delete R.onClick,V.createElement(T.label,{...y(R,$,M,B),ref:d,slot:e.slot||void 0,"data-selected":b||void 0,"data-indeterminate":e.isIndeterminate||void 0,"data-pressed":m||void 0,"data-hovered":D||void 0,"data-focused":P||void 0,"data-focus-visible":I||void 0,"data-disabled":s||void 0,"data-readonly":l||void 0,"data-invalid":a||void 0,"data-required":e.isRequired||void 0},V.createElement(Q,{elementType:"span"},V.createElement("input",{...y(v,C),ref:r})),B.children)});export{oe as $};
