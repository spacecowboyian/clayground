import{d as C,c as _,b as x,a as T,e as I,$ as D}from"./utils-LaqegW2K.js";import{a as N}from"./ProgressBar-C-avWlme.js";import{$ as R}from"./Hidden-o7BpdpsO.js";import{r as b,R as L}from"./index-Dq4ZvVuH.js";import{$ as F}from"./useButton-BLdXFJ-e.js";import{j as V,i as w}from"./useFocusRing-ubySK4Mk.js";const y=7e3;let o=null;function P(d,e="assertive",t=y){o?o.announce(d,e,t):(o=new M,(typeof IS_REACT_ACT_ENVIRONMENT=="boolean"?IS_REACT_ACT_ENVIRONMENT:typeof jest<"u")?o.announce(d,e,t):setTimeout(()=>{o!=null&&o.isAttached()&&(o==null||o.announce(d,e,t))},100))}function W(d){o&&o.clear(d)}class M{isAttached(){var e;return(e=this.node)===null||e===void 0?void 0:e.isConnected}createLog(e){let t=document.createElement("div");return t.setAttribute("role","log"),t.setAttribute("aria-live",e),t.setAttribute("aria-relevant","additions"),t}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}announce(e,t="assertive",l=y){var i,a;if(!this.node)return;let n=document.createElement("div");typeof e=="object"?(n.setAttribute("role","img"),n.setAttribute("aria-labelledby",e["aria-labelledby"])):n.textContent=e,t==="assertive"?(i=this.assertiveLog)===null||i===void 0||i.appendChild(n):(a=this.politeLog)===null||a===void 0||a.appendChild(n),e!==""&&setTimeout(()=>{n.remove()},l)}clear(e){this.node&&((!e||e==="assertive")&&this.assertiveLog&&(this.assertiveLog.innerHTML=""),(!e||e==="polite")&&this.politeLog&&(this.politeLog.innerHTML=""))}constructor(){this.node=null,this.assertiveLog=null,this.politeLog=null,typeof document<"u"&&(this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,{border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"}),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node))}}const O=b.createContext({}),Y=R(function(e,t){[e,t]=C(e,t,O);let l=e,{isPending:i}=l,{buttonProps:a,isPressed:n}=F(e,t);a=H(a,i);let{focusProps:E,isFocused:r,isFocusVisible:$}=V(e),{hoverProps:A,isHovered:h}=w({...e,isDisabled:e.isDisabled||i}),v={isHovered:h,isPressed:(l.isPressed||n)&&!i,isFocused:r,isFocusVisible:$,isDisabled:e.isDisabled||!1,isPending:i??!1},p=_({...e,values:v,defaultClassName:"react-aria-Button"}),c=x(a.id),u=x(),s=a["aria-labelledby"];i&&(s?s=`${s} ${u}`:a["aria-label"]&&(s=`${c} ${u}`));let f=b.useRef(i);b.useEffect(()=>{let m={"aria-labelledby":s||c};(!f.current&&r&&i||f.current&&r&&!i)&&P(m,"assertive"),f.current=i},[i,r,s,c]);let g=T(e,{global:!0});return delete g.onClick,L.createElement(I.button,{...D(g,p,a,E,A),type:a.type==="submit"&&i?"button":a.type,id:c,ref:t,"aria-labelledby":s,slot:e.slot||void 0,"aria-disabled":i?"true":a["aria-disabled"],"data-disabled":e.isDisabled||void 0,"data-pressed":v.isPressed||void 0,"data-hovered":h||void 0,"data-focused":r||void 0,"data-pending":i||void 0,"data-focus-visible":$||void 0},L.createElement(N.Provider,{value:{id:u}},p.children))});function H(d,e){if(e){for(const t in d)t.startsWith("on")&&!(t.includes("Focus")||t.includes("Blur"))&&(d[t]=void 0);d.href=void 0,d.target=void 0}return d}export{Y as $,O as a,P as b,W as c};
